<div class="page_header_container" ng-cloak>
    <div class="page_header">
        <div class="left page_action_container">

        </div>
        <div class="page_title">
            <h1>{$:: (inventory_type === 'taxlots' ? 'Tax Lots' : 'Properties') | translate $}</h1>
        </div>
        <div class="right page_action_container page_action_btn"></div>
    </div>
</div>

<div class="section_nav_container">
    <div class="section_nav" ng-include="::urls.static_url + 'seed/partials/inventory_nav.html'"></div>
</div>


<div class="section">
    <div class="section_header_container">
        <div class="section_header has_no_padding fixed_height_short">
            <div class="section_action_container right_40 section_action_btn pull-right">
                <a ui-sref="organization_derived_column_editor(::{organization_id: org.id, derived_column_id: null})">
                    <button type="button" class="btn btn-primary">
                        Create Derived Column
                    </button>
                </a>
            </div>
            <div class="section_action_container left_40">
                <h2><i class="fa fa-calculator"></i> <span translate>Data Aggregations</span></h2>
            </div>
            <div class="section_action_container right_40 section_action_btn pull-right">
                <a ui-sref="data_aggregation_editor(::{inventory_type: inventory_type})">
                    <button type="button" class="btn btn-primary">
                        Create Data Aggregation 2.0
                    </button>
                </a>
            </div>
        </div>
    </div>
    <div class="section_content_container">
        <div class="section_content with_padding" style="margin-top:15px; margin-bottom:15px;">
            <div class="table_list_container has_borders">
                <table id="column-table" class="table has_no_btm_margin">
                    <thead>
                        <tr>
                            <th class="text-left" ng-click="toggle_name_order_sort()">
                                <span>Data Aggregation Name<i class="glyphicon glyphicon-sort"></i></span>
                            </th>
                            <th class="text-left">
                                <span>Type</span>
                            </th>
                            <th class="text-left">
                                <span>Source Column</span>
                            </th>
                            <th class="text-left">
                                <span>Units</span>
                            </th>
                            <th class="text-center" style="min-width: 120px; width: 120px;">
                                <span>Actions</span>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-if="data_aggregations.length > 0" ng-repeat="data_aggregation in data_aggregations">
                            <td>
                                {$ data_aggregation.name $}
                            </td>
                            <td>
                                {$ data_aggregation.type $}
                            </td>
                            <td>
                                {$ data_aggregation.column_id_name $}
                            </td>
                            <td>
                                {$ data_aggregation.value.units $}
                            </td>
                            <td class="text-center">
                                <button class="btn btn-info" type="button"
                                    ng-click="edit_data_aggregation(data_aggregation.id)">
                                    <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                                </button>
                                <button class="btn btn-danger" type="button"
                                    ng-click="delete_data_aggregation(data_aggregation.id)">
                                    <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                                </button>
                            </td>
                        </tr>
                        <tr ng-if="data_aggregations.length == 0" style="background-color: #eee">
                            <td class="text-center" colspan="3">
                                <h5>No Derived Columns</h5>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>